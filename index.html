<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/Garbage/favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Web site created using create-react-app"/><link rel="apple-touch-icon" href="/Garbage/logo192.png"/><link rel="manifest" href="/Garbage/manifest.json"/><title>Contract</title><style>body{font-family:Arial,sans-serif;background-color:#e6f7ff;margin:0;padding:20px}form{background-color:#f7f7f7;padding:20px;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,.1);width:450px;margin:20px auto}input[type=email],input[type=file],input[type=text],select{width:100%;padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px}input[type=number]{width:100px;padding:8px;margin-left:10px;border:1px solid #ccc;border-radius:4px}canvas{border:1px solid #000;margin-bottom:10px}button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}button:hover{background-color:#0056b3}.row{display:flex;align-items:center;margin-bottom:10px}.row label{margin-right:10px}.row select{flex:1}.signature-container{display:flex;align-items:center;justify-content:space-between}table{width:100%;border-collapse:collapse;margin-top:20px}table,td,th{border:1px solid #ccc}td,th{padding:8px;text-align:left}th{background-color:#f2f2f2}</style><script defer="defer" src="/Garbage/static/js/main.41f489ca.js"></script></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><h1 style="text-align:center">Contract</h1><form id="uploadForm" enctype="multipart/form-data"><h2>Scanați actul de identitate</h2><label for="image">Încărcați o imagine:</label> <input type="file" id="image" name="image" accept="image/png, image/jpeg" required/> <button type="button" id="processImage">Procesează imaginea</button></form><form id="dataForm"><h2>Completați formularul</h2><label for="input1">Nume:</label> <input id="input1" name="input1" placeholder="Introduceți numele" required/> <label for="input2">Prenume:</label> <input id="input2" name="input2" placeholder="Introduceți prenumele" required/> <label for="input3">CNP:</label> <input id="input3" name="input3" placeholder="Introduceți CNP-ul" required/> <label for="input4">Adresă:</label> <input id="input4" name="input4" placeholder="Introduceți adresa" required/> <label for="email">Adresă de email:</label> <input type="email" id="email" name="email" placeholder="Introduceți adresa de email" required/><div class="row"><label for="combobox">Capacitate:</label> <select id="combobox" name="combobox" required><option value="mic">Mic</option><option value="mare">Mare</option></select> <label for="numarPersoane" style="margin-left:10px">Nr. Persoane:</label> <input type="number" id="numarPersoane" name="numarPersoane" placeholder="Nr. persoane" required/></div><label for="sumaLunara">Suma de plată lunară:</label> <input id="sumaLunara" name="sumaLunara" placeholder="Suma calculată" readonly="readonly"/> <label>Semnătură:</label><div class="signature-container"><canvas id="signatureCanvas" width="300" height="150"></canvas><button type="button" onclick="clearCanvas()">Șterge Semnătura</button></div><input type="hidden" id="signatureData" name="signatureData"/> <button type="submit" onclick="saveSignature()">Trimite</button></form><h2>Date salvate</h2><div id="data-container"></div></div><script>document.getElementById("processImage").addEventListener("click",(async()=>{const e=document.getElementById("uploadForm"),t=new FormData(e);try{const e=await fetch("/upload",{method:"POST",body:t});if(!e.ok)throw new Error("Eroare la procesarea imaginii.");const a=await e.json();document.getElementById("input1").value=a.nume||"",document.getElementById("input2").value=a.prenume||"",document.getElementById("input3").value=a.cnp||"",document.getElementById("input4").value=a.adresa||""}catch(e){console.error("Eroare:",e),alert("A apărut o problemă la procesarea imaginii.")}}));const canvas=document.getElementById("signatureCanvas"),ctx=canvas.getContext("2d");let isDrawing=!1;function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}function saveSignature(){const e=canvas.toDataURL("image/png");document.getElementById("signatureData").value=e}async function fetchSavedData(){try{const e=await fetch("/contracte");if(!e.ok)throw new Error("Eroare la încărcarea datelor salvate.");const t=await e.json(),a=document.getElementById("data-container");let n="<table><tr><th>ID</th><th>Nume</th><th>Prenume</th><th>CNP</th><th>Adresă</th></tr>";t.forEach((e=>{n+=`<tr>\n                        <td>${e.id}</td>\n                        <td>${e.nume}</td>\n                        <td>${e.prenume}</td>\n                        <td>${e.cnp}</td>\n                        <td>${e.adresa}</td>\n                    </tr>`})),n+="</table>",a.innerHTML=n}catch(e){console.error("Eroare:",e)}}canvas.addEventListener("mousedown",(e=>{isDrawing=!0,ctx.beginPath(),ctx.moveTo(e.offsetX,e.offsetY)})),canvas.addEventListener("mousemove",(e=>{isDrawing&&(ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke())})),canvas.addEventListener("mouseup",(()=>{isDrawing=!1})),canvas.addEventListener("mouseleave",(()=>{isDrawing=!1})),fetchSavedData()</script></body></html>